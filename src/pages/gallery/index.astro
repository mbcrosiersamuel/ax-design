---

import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';
import Card from '@components/Card.astro';

const allPosts = await getCollection('posts');
const sortedPosts = allPosts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const goodPosts = sortedPosts.filter(post => post.data.verdict === 'good');
---

<BaseLayout
  title="Gallery | agentexperience.design"
  description="Explore examples of good Agent Experience design patterns"
>
  <div class="gallery">
    <div class="container">
      <header class="gallery__header">
        <h1 class="gallery__title">Agent Experience (AX) Design Gallery</h1>
        <p class="gallery__subtitle">
          Real-world examples of good AX Design and Agent-Friendly patterns.
        </p>
      </header>

      <!-- Good AX Section -->
      <section class="gallery__section">
        <div class="gallery__section-header">
          <h2 class="gallery__section-title">
            <span class="badge badge--good">Good AX</span>
            Agent-Friendly Patterns
          </h2>
        </div>

        <div class="gallery__grid">
          {goodPosts.map((post) => (
            <Card
              title={post.data.title}
              companies={post.data.companies}
              verdict={post.data.verdict}
              summary={post.data.summary}
              date={post.data.date}
              slug={post.slug}
              heroImage={post.data.heroImage}
              tags={post.data.tags}
            />
          ))}
        </div>

        {goodPosts.length === 0 && (
          <p class="gallery__empty">No good examples yet. Check back soon!</p>
        )}
      </section>
    </div>
  </div>
</BaseLayout>

<style>
  .gallery {
    padding: var(--space-16) 0;
  }

  .gallery__header {
    text-align: center;
    margin-bottom: var(--space-16);
    max-width: var(--content-width);
    margin-left: auto;
    margin-right: auto;
  }

  .gallery__title {
    font-size: var(--text-5xl);
    margin-bottom: var(--space-4);
  }

  .gallery__subtitle {
    font-size: var(--text-xl);
    color: var(--color-text-muted);
    line-height: var(--line-relaxed);
  }

  .gallery__section {
    margin-bottom: var(--space-20);
  }

  .gallery__section:last-child {
    margin-bottom: 0;
  }

  .gallery__section-header {
    margin-bottom: var(--space-8);
  }

  .gallery__section-title {
    font-size: var(--text-3xl);
    margin-bottom: var(--space-3);
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-wrap: wrap;
  }

  .gallery__section-description {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    line-height: var(--line-relaxed);
    max-width: var(--content-width);
  }

  .badge {
    display: inline-flex;
    align-items: center;
    padding: var(--space-2) var(--space-4);
    font-size: var(--text-sm);
    font-weight: 600;
    border-radius: var(--radius-full);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .badge--good {
    background: var(--color-good-bg);
    color: var(--color-good);
  }

  .badge--bad {
    background: var(--color-bad-bg);
    color: var(--color-bad);
  }

  .gallery__grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--space-8);
  }

  .gallery__empty {
    text-align: center;
    padding: var(--space-16);
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    background: var(--color-bg-subtle);
    border: 1px dashed var(--color-border);
    border-radius: var(--radius-lg);
  }

  @media (max-width: 768px) {
    .gallery {
      padding: var(--space-12) 0;
    }

    .gallery__header {
      margin-bottom: var(--space-12);
    }

    .gallery__title {
      font-size: var(--text-4xl);
    }

    .gallery__subtitle {
      font-size: var(--text-base);
    }

    .gallery__section {
      margin-bottom: var(--space-16);
    }

    .gallery__section-title {
      font-size: var(--text-2xl);
    }

    .gallery__section-description {
      font-size: var(--text-base);
    }

    .gallery__grid {
      grid-template-columns: 1fr;
      gap: var(--space-6);
    }
  }
</style>
